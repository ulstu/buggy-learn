# Модель багги-автомобиля, управляемая ROS2

Большинство типовых роботов для обучения, а также программных решений в среде ROS рассчитаны на использование роботов с кинематикой differential wheel или mecanum
![](../ros2/docs/img/diff_drive.png)
 
Реальные транспортные средства как правило используют кинематику Аккермана, накладывающую ограничения на возможную траекторию перемещения робота. 

![](../ros2/docs/img/ackerman.png)

Это затрудняет применение разработанных решений при автоматизации управления привычными транспортными средствами.

Предлагается использовать в процессе обучения робототехнике разработанную платформу на основе модели автомобиля, имеющего кинематику Аккермана. Данная платформа отличается невысокой стоимостью, высокой проходимостью, большей грузоподъемностью. Но одним из главных преимуществ является возможность использования разработанных в процессе обучения решений при создании беспилотных автомобилей.

Основой робота служит радиоуправляемая модель шорт-корс Traxxas Raptor FORD F-150. Штатная аппаратура дистанционного управления была демонтирована, а на ее место установлен специальный комплект для осуществления управления роботом по сети, а также микрокомпьютер Nvidia Jetson AGX Xavier и сканирующий лазерный дальномер Hokuyo на базе микроконтроллера ESP32.

![](../ros2/docs/img/traxxas.png)

![](../ros2/docs/img/buggy-schemas.png)

Полученная платформа с точки зрения принципов управления мало отличается от реального автомобиля с автоматической трансмиссией, что позволяет отлаживать алгоритмы управления в лаборатории, а потом применять их при автоматизации серийно-выпускаемых транспортных средств.

Все оборудование размещается непосредственно на роботе, что позволяет работать полностью автономно.

![Архитектура](../ros2/docs/img/arch.jpeg)

В качестве управляющего микроконтроллера был выбран ESP32, так как он обладает широкими возможностями при крайне низкой стоимости. В отличие от многих других роботов для обмена данными используется интерфейс Ethernet, реализованный при помощи W5500. Данное решение отличается высокой стабильностью работы, устойчивостью к помехам, отсутствием необходимости задействовать WiFi адаптер микрокомпьютера или иметь внешнюю беспроводную сеть.
Алгоритмы управления роботом запускаются на бортовом компьютере. Был выбран Nvidia AGX Xavier, но могут быть использованы решения других производителей, например, Raspberry PI или наиболее доступный Orange PI.
В примере применен однолучевой лидар Hokue, который может быть легко заменен на аналогичные решения китайских производителей. При желании конфигурация может быть дополнена простой или стереокамерой.

В основе низкоуровневой системы управления роботом лежит печатная плата собственной разработки, на которой размещены основные компоненты, включая микроконтроллер семейства ESP32, Ethernet модуль W5500, IMU на основе MEMS от ST microelectronics, преобразователь напряжения 12 – 5 В, а также разъемы для подключения дополнительных компонентов, таких, как плата с транзисторными ключами BTS7960 и сервопривода рулевого управления.

Разводка печатной платы
![](../ros2/docs/img/scheme_el.png)

После монтажа на робота
![](../ros2/docs/img/scheme_robot.png)


